(function(){var t,e,n,s,o,i,r,a,u;n=function(){return $.getJSON(".",function(t){return console.log(t)})},window.getHash=function(){return window.location.hash.substr(3)},window.setHash=function(t){return window.location.hash="!/"+t},a=function(){return window.setHash($("#emulsifiers").val())},s=function(t){return $("html,body").animate({scrollTop:$(t).offset().top})},e=/^(E|e)?([\d]{3,4})([a-z])?$/,$("#emulsifiers").tagsinput({trimValue:!0,tagClass:"label label-primary",maxChars:4,itemText:function(t){return"e"===t.charAt(0)||"E"===t.charAt(0)?t:"E"+t}}),r=$("#emulsifiers"),i=r.parent().find(".bootstrap-tagsinput input:text");for(t in window.getHash().split(","))o=window.getHash().split(",")[t],("E"===(u=o.charAt(0))||"e"===u)&&(o=o.slice(1)),e.test(o)&&r.tagsinput("add",o);a(!0),r.on("beforeItemAdd",function(t){var n,s;return console.log("Received "+t.item),("e"===(s=t.item.charAt(0))||"E"===s||"ე"===s)&&i.val(i.val().slice(1)),e.test(t.item)?console.log("Adding "+t.item):(i.popover("show"),t.cancel=!0,console.log("Rejected "+t.item),console.log(i),n=t.item,setTimeout(function(){return i.val(n)},2))}).on("itemAdded itemRemoved",function(){return function(t){return console.log("Added "+t.item),n(t),a(!0)}}(this)),i.on("keypress",function(t){var e;return 13!==(e=t.which)&&44!==e?setTimeout(function(){return i.popover("hide")},50):void 0}),$(document).on("focus",".bootstrap-tagsinput > input",function(){return $(this).parent().addClass("active")}).on("blur",".bootstrap-tagsinput > input",function(){return $(this).parent().removeClass("active"),i.popover("hide")}),$("#emulsifier-submit").click(function(){return $("#emulsifier-form").submit()}),$("#emulsifier-form").submit(function(t){return t.preventDefault(),i.val("").popover("hide"),$("#start-hint, #results").fadeOut(250),$("#loading-results").delay(280).fadeIn(300),setTimeout(function(){return $("#loading-results").fadeOut(250),$("#results").delay(280).fadeIn(300)},1800),setTimeout(function(){return function(){return s("#results")}}(this),2300)}),$("#loading-results, #results").hide(!0),i.attr("tabindex",1),r.tagsinput("focus"),$(".bootstrap-tagsinput").addClass("active"),i.popover({placement:"bottom",html:!0,trigger:"manual",title:"შეცდომა :(",content:'<p>ემულგატორები იწერება შემდეგი ფორმატით: <code><b class="text-success">E</b><b class="text-danger">AAA</b><b class="text-warning">B</b></code>, სადაც AAA არის ემულგატორის ნომერი, ხოლო B შეიძლება იყოს (ან არა) დამატებითი ასო-ნიშანი.</p><p>მაგ.: <code><b class="text-success">E</b><b class="text-danger">102</b></code>, <code><b class="text-success">E</b><b class="text-danger">1412</b></code>, <code><b class="text-success">E</b><b class="text-danger">161</b><b class="text-warning">c</b></code></p>'}),$("[title]").tooltip(!0)}).call(this);